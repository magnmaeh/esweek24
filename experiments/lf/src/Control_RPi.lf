target C {
    single-threaded: true,
    cmake-include: "../../lib/RPi/interrupt.cmake",
    files: "../../lib/RPi/interrupt.c"
}

import ControlCore from "../../lib/libControl.lf"

preamble {=
    #include "/tmp/config.h"
    
    void configure_pins(void);
    void disable_interrupts(void);
    void printf_custom_init(void);
=}

main reactor {
    ctrl = new ControlCore(n_iterations = {= CONFIG_NITERATIONS =})
}

